# -*- coding: utf-8 -*-
"""e-commerce dataset for fds.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/13vEXMbnFIagV72cUR_JW7bUGp9tSFn3s
"""

from google.colab import files
uploaded = files.upload()

import pandas as pd
import numpy as np
df = pd.read_csv('ecommerce_20000.csv')
df.head()

df.info()

df.describe()

import matplotlib.pyplot as plt
import seaborn as sns
sns.set(style='whitegrid', palette='viridis')

# 1. Product Category distribution
plt.figure(figsize=(8,5))
sns.countplot(data=df, x='Category')
plt.title('Count of Products by Category')
plt.xlabel('Product Category')
plt.ylabel('Count')
plt.xticks(rotation=45)
plt.show()

#Purpose:
#Shows how many products belong to each category (like Electronics, Clothing, Books, etc.).

"""Explanation:

countplot() counts how many rows fall into each unique category.

x='Category' means we‚Äôre taking ‚ÄúCategory‚Äù as the categorical variable on the x-axis.

Helps identify which product categories are most common.
"""

# 2. Distribution of Product Price
plt.figure(figsize=(7,5))
sns.histplot(df['Price'], bins=20, kde=True)
plt.title('Distribution of Product Prices')
plt.xlabel('Price')
plt.ylabel('Frequency')
plt.show()
#Purpose:
#Shows how prices are spread ‚Äî low-priced vs high-priced products.

"""

**Explanation:**

histplot() draws a histogram of ‚ÄúPrice‚Äù.

bins=20 divides the data into 20 equal intervals.

kde=True overlays a smooth line showing the probability density."""

# 3. Distribution of Customer Age
plt.figure(figsize=(7,5))
sns.histplot(df['Age'], bins=15, kde=True, color='teal')
plt.title('Distribution of Customer Age')
plt.xlabel('Age')
plt.ylabel('Count')
plt.show()

#Purpose:
#Displays age distribution of customers.

"""Explanation:

Similar to price, but applied to Customer_Age.

Helps understand which age groups are most active customers.
"""

# BIVARIATE ANALYSIS
# 1. Category vs Average Total Amount
plt.figure(figsize=(8,5))
sns.barplot(data=df, x='Category', y='Total_Amount', estimator='mean')
plt.title('Average Total Amount by Category')
plt.xticks(rotation=45)
plt.show()

#Purpose:
#Compares average spending (Total Amount) across different product categories.
#BarPlot

"""Explanation:

barplot() shows mean value of Total_Amount for each Category.

estimator='mean' ensures we‚Äôre taking the average.
"""

# 2. Payment Method vs Total Amount
plt.figure(figsize=(8,5))
sns.boxplot(data=df, x='Payment_Method', y='Total_Amount')
plt.title('Total Amount Distribution by Payment Method')
plt.xticks(rotation=45)
plt.show()

#Purpose:
#Analyzes how the payment method influences purchase value.
#Boxplot

"""Explanation:

boxplot() shows median, quartiles, and outliers for total amount grouped by payment method.

Helps identify spending behavior per payment channel.
"""

# 3. Customer Age vs Total Amount
plt.figure(figsize=(8,5))
sns.scatterplot(data=df, x='Age', y='Total_Amount')
plt.title('Customer Age vs Total Amount')
plt.xlabel('Customer Age')
plt.ylabel('Total Amount')
plt.show()


#Purpose:
#Examines if customer age impacts purchase value.
#Scatter Plot

"""Explanation:

Each point represents one order (age vs total amount).

A visible pattern (upward or downward trend) indicates correlation.
"""

# ---------------------------------------------------
# üéØ MULTIVARIATE ANALYSIS
# ---------------------------------------------------

# 1. Price vs Quantity by Category
plt.figure(figsize=(8,6))
sns.scatterplot(data=df, x='Price', y='Quantity', hue='Category', style='Payment_Method')
plt.title('Price vs Quantity (Colored by Category and Payment Method)')
plt.show()

#Purpose:
#Studies how product price and quantity sold vary across categories and payment modes.

"""Explanation:

x='Price', y='Quantity' ‚Üí primary numeric relation.

hue='Category' ‚Üí different colors for categories.

style='Payment_Method' ‚Üí different shapes for payment types.

"""

# 2. Total Amount vs Customer Age with hue as Order Status
plt.figure(figsize=(8,6))
sns.scatterplot(data=df, x='Age', y='Total_Amount', hue='Order_Status', size='Price', sizes=(50,200))
plt.title('Total Amount vs Age with Order Status and Price Size')
plt.show()

#Purpose:
#Combines purchase value, age, order status, and price in one visualization.

"""Explanation:

hue='Order_Status' ‚Üí color shows delivery/cancellation status.

size='Price' ‚Üí larger bubbles represent expensive items.

Shows how order outcomes vary by age group and purchase size.
"""

# 3. Correlation heatmap for numeric features
plt.figure(figsize=(7,5))
sns.heatmap(df[['Price','Quantity','Total_Amount','Age']].corr(), annot=True, cmap='coolwarm')
plt.title('Correlation Heatmap of Numerical Features')
plt.show()


#Purpose:
#Displays correlation coefficients between numeric variables.

"""Explanation:

.corr() computes Pearson correlation.

annot=True prints the values inside cells.

Colors indicate strength (+1 = strong positive, -1 = strong negative).

**CONCLUSION**

Based on the visualizations, here are some conclusions about the dataset:

Product Category Distribution: The dataset contains a relatively even distribution of products across the different categories, with "Electronics" and "Clothing" appearing slightly more frequently.

Distribution of Product Prices: The distribution of product prices is right-skewed, indicating that there are more products in the lower price range. There is a smaller number of more expensive products.

Distribution of Customer Age: The customer base is spread across a wide range of ages, with a slight tendency towards customers in their late 20s to early 40s.

Average Total Amount by Category: "Electronics" and "Clothing" categories tend to have the highest average total amounts spent, suggesting that customers might be purchasing more expensive items or higher quantities in these categories.

Total Amount Distribution by Payment Method: The boxplot shows similar distributions of total amounts across different payment methods, indicating that the payment method itself doesn't strongly influence the purchase value. There might be a few outliers with high total amounts across different payment methods.

Customer Age vs Total Amount: The scatter plot doesn't reveal a strong linear correlation between customer age and the total amount spent. This suggests that customers of various ages are making both small and large purchases.

Price vs Quantity by Category and Payment Method: This scatter plot allows for a visual exploration of how price and quantity relate within each category and payment method. There isn't a clear pattern suggesting that higher prices always lead to lower quantities, or vice-versa, when considering categories and payment methods. The plot does show that higher total amounts are often associated with higher prices or quantities.

Total Amount vs Age with Order Status and Price Size: This plot allows for a more nuanced understanding of how age, total amount, order status, and price interact. For example, you might observe if certain age groups have a higher proportion of 'Delivered' or 'Cancelled' orders, or if more expensive items tend to have a particular order status.

Correlation Heatmap: The heatmap shows the correlation between the numerical features. As expected, there's a strong positive correlation between 'Price' and 'Total_Amount', and 'Quantity' and 'Total_Amount'. This is because Total_Amount is calculated based on Price and Quantity. There appears to be a weak to no correlation between 'Customer_Age' and the other numerical features.
"""